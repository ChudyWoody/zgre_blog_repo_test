<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Robiemy zgreblog · johndoe
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="John Doe">
<meta name="description" content="Chcemy zrobić blog z notatek w Obsidianie.
Do tego potrzebne są już zainstalowane:

Obsidian
python3
git
Go
Hugo

Ja będę robił wszystko w wirtualnym środowisku pythona. Dlaczego? Bo tak.
Najpierw stworzę sobie venv:
	mkdir ~/python_envs/hugo_website
	python3 -m venv ~/python_envs/hugo_website
	source ~/python_envs/hugo_website/bin/activate

No i mam.
Teraz ściągnę do tego środowiska hugo:
	pip install hugo
	# sprawdzę czy jest:
	hugo version
	# powinien zwrócić komunikat o tym że działa przez pythona czy coś. 

Teraz trzeba stworzyć folder, w którym będzie nasza stronka. Robimy to zanim ją zainicjujemy, bo chcemy ją potem udostępniać przez GitHub Pages, więc musimy w tym folderze zainicjować repozytorium gita.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Robiemy zgreblog">
  <meta name="twitter:description" content="Chcemy zrobić blog z notatek w Obsidianie.
Do tego potrzebne są już zainstalowane:
Obsidian python3 git Go Hugo Ja będę robił wszystko w wirtualnym środowisku pythona. Dlaczego? Bo tak.
Najpierw stworzę sobie venv:
mkdir ~/python_envs/hugo_website python3 -m venv ~/python_envs/hugo_website source ~/python_envs/hugo_website/bin/activate No i mam.
Teraz ściągnę do tego środowiska hugo:
pip install hugo # sprawdzę czy jest: hugo version # powinien zwrócić komunikat o tym że działa przez pythona czy coś. Teraz trzeba stworzyć folder, w którym będzie nasza stronka. Robimy to zanim ją zainicjujemy, bo chcemy ją potem udostępniać przez GitHub Pages, więc musimy w tym folderze zainicjować repozytorium gita.">

<meta property="og:url" content="http://localhost:1313/projects/robimy-zgreblog/">
  <meta property="og:site_name" content="johndoe">
  <meta property="og:title" content="Robiemy zgreblog">
  <meta property="og:description" content="Chcemy zrobić blog z notatek w Obsidianie.
Do tego potrzebne są już zainstalowane:
Obsidian python3 git Go Hugo Ja będę robił wszystko w wirtualnym środowisku pythona. Dlaczego? Bo tak.
Najpierw stworzę sobie venv:
mkdir ~/python_envs/hugo_website python3 -m venv ~/python_envs/hugo_website source ~/python_envs/hugo_website/bin/activate No i mam.
Teraz ściągnę do tego środowiska hugo:
pip install hugo # sprawdzę czy jest: hugo version # powinien zwrócić komunikat o tym że działa przez pythona czy coś. Teraz trzeba stworzyć folder, w którym będzie nasza stronka. Robimy to zanim ją zainicjujemy, bo chcemy ją potem udostępniać przez GitHub Pages, więc musimy w tym folderze zainicjować repozytorium gita.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">




<link rel="canonical" href="http://localhost:1313/projects/robimy-zgreblog/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      johndoe
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="http://localhost:1313/projects/robimy-zgreblog/">
          Robiemy zgreblog
        </a>
      </h1>
    </header>

    <p>Chcemy zrobić blog z notatek w Obsidianie.</p>
<p>Do tego potrzebne są już zainstalowane:</p>
<ul>
<li>Obsidian</li>
<li>python3</li>
<li>git</li>
<li>Go</li>
<li>Hugo</li>
</ul>
<p>Ja będę robił wszystko w wirtualnym środowisku pythona. Dlaczego? Bo tak.</p>
<p>Najpierw stworzę sobie venv:</p>
<pre><code>	mkdir ~/python_envs/hugo_website
	python3 -m venv ~/python_envs/hugo_website
	source ~/python_envs/hugo_website/bin/activate
</code></pre>
<p>No i mam.</p>
<p>Teraz ściągnę do tego środowiska hugo:</p>
<pre><code>	pip install hugo
	# sprawdzę czy jest:
	hugo version
	# powinien zwrócić komunikat o tym że działa przez pythona czy coś. 
</code></pre>
<p>Teraz trzeba stworzyć folder, w którym będzie nasza stronka. Robimy to zanim ją zainicjujemy, bo chcemy ją potem udostępniać przez GitHub Pages, więc musimy w tym folderze zainicjować repozytorium gita.</p>
<pre><code>	mkdir zgre_blog_test
	cd zgre_blog_test
	git init
	git config --global user.name &quot;ChudyWoody&quot;
	git config --global user.email &quot;zgredek94@gmail.com&quot;
</code></pre>
<p>Trzeba oczywiście podmienić na swoje configi gita.</p>
<p>Teraz trzeba zainicjować stronkę przy pomocy hugo. Idę do swojego folderu z venv i to robię:</p>
<pre><code>	cd ~/python_envs/hugo_website
	hugo new site ../zgre_blog_test --force
</code></pre>
<p>Stworzył się nowy folder o nazwie zgre_blog_test, w którym jest prawie wszystko potrzebne do dalszej pracy. Żeby stronka jakoś wyglądała trzeba ściągnąć  hugo-theme i potem dostosować go do swoich potrzeb. Mi się podoba taki:
<a href="https://themes.gohugo.io/themes/hugo-coder"  class="external-link" target="_blank" rel="noopener">https://themes.gohugo.io/themes/hugo-coder</a></p>
<p>Najlepiej zrobić to dodając submoduł gita (czymkolwiek to jest,ale tak doradzają w tutorialach hugo i networkchucka)</p>
<pre><code>	git submodule add -f https://github.com/luizdepra/hugo-coder.git themes/hugo-coder
</code></pre>
<p>Teraz jak już mamy ściągnięty theme w odpowiednim miejscu trzeba skopiować sobie jego konfigurację do naszego &hellip;/zgre_blog_test/hugo.toml</p>
<pre><code>	cp ~/python_envs/hugo_python_website/zgre_blog_test/themes/hugo-coder/exampleSite/hugo.toml ~/python_envs/hugo_python_website/zgre_blog_test/hugo.toml
</code></pre>
<p>Sprawdźmy czy działa:</p>
<pre><code>	hugo server -t themename
	hugo serve # w folderze zgre_blog_test
	# No i działa!
</code></pre>
<p>Co nie będzie działać to podstronki, dlatego że w folderze zgre_blog_test/content nic nie mamy. Żeby działały &ldquo;Blog&rdquo; i &ldquo;Projects&rdquo; trzeba tam utworzyć posts i projects itd, ale treść do nich doda się później:</p>
<pre><code>	mkdir ./content/posts ./content/projects ./content/about ./content/contact
</code></pre>
<p>Teraz zajmiemy się synchronizacją naszej stronki z obsidianem. Posłuży nam do tego komenda rsync:</p>
<pre><code>	rsync -av --delete &quot;sourcepath&quot; &quot;destinationpath&quot;
</code></pre>
<p>gdzie &ldquo;sourcepath&rdquo; to lokalizacja postów w Obsidianie, które chcemy na stronce, a &ldquo;destinationpath&rdquo; to lokalizacja postów w plikach stronki. Opcja -a to archive - kopiuje z symlinkami i uprawnieniami i innymi metadanymi, opcja -v to verbose - żeby nam powiedział czy wszystko spoko i co jest niespoko, opcja &ndash;delete - usunie w destinationpath to czego nie ma w sourcepath. Dla mnie to będzie:</p>
<pre><code>	rsync -av --delete /home/vmzgred/Dokumenty/obsidian/zgreblog/posty/* /home/vmzgred/python_envs/hugo_python_website/zgre_blog_test/content/posts
</code></pre>
<p>Warto w ogóle sobie wcześniej przygotować kilka testowych postów, najlepiej ze zdjęciami, żeby sprawdzić jak to się sprawuje. A sprawuje się średnio ze zdjęciami, bo Obsidian trzyma załączniki tam gdzie mu się powie, z reguły w folderze wyszczególnionym w ustawieniach przez użytkownika (tak polecam mieć skonfigurowane) i w samych notatkach ma wewnętrzne swoje linki do załączników. Trzeba to jakoś obejść, a pythonowe obejście napisał networkchuck. Ja je troszeńkę pozmieniam, bo w chuckowym skrypcie zostawały wykrzykniki przed zdjęciami.
Pamiętaj że dla pythona ważne są tabulatory, trzeba je usunąć, bo w tej notce są po dwa przed każdyą &ldquo;zerową&rdquo; kolumną.</p>
<p><code>python</code> To jeszcze zmienić!!!:</p>
<pre><code>	import os
	import re
	import shutil
	
	# Paths: 
	posts_dir = &quot;/home/vmzgred/python_envs/hugo_python_website/zgre_blog_test/content/posts&quot; # to ma być lokalizacja z postami do udostępnienia! w folderze Hugo!
	attachments_dir = &quot;home/vmzgred/Dokumenty/obsidian/zgreblog/zzAssets&quot;
	static_images_dir = &quot;/home/vmzgred/python_envs/hugo_python_website/zgre_blog_test/static&quot;
	
	#Step #1: Process each markdown file in the posts directory
	for filename in os.listdir(posts_dir):
		if filename.endswith(&quot;.md&quot;):
			filepath = os.path.join(posts_dir, filename) # to nam dołączy nazwę pliku postu do ścieżki z postami
			with open(filepath, &quot;r&quot;) as file: 
				content = file.read() # to nam otworzy plik postu w trybie read
				
			# Step 2: Find all image links in the format ![Image Description](/images/Pasted%20image%20...%20.png)
			images = re.findall(r'\[\[([^]]*\.png)\]\]', content) # ta linia znajduje wszystkie odnośniki do zdjęć w poście w Obsidianie 
			for image in images:
				# Prepare the Markdown-compatible link with %20 replacing spaces
				markdown_image = f&quot;![Image Description](/images/{image.replace(' ', '%20')})&quot;
				content = content.replace(f&quot;[[{image}]]&quot;, markdown_image) # to podmienia spacje w opisie zdjęć na %20 (kompatybilność z url) 
				# Step 4: Copy the image to the Hugo static directory if it exists
				image_source = os.path.join(attachments_dir, image)
				if os.path.exists(image_source):
					shutil.copy(image_source, static_images_dir)
			with open(filepath, &quot;w&quot;) as file:
				file.write(content)
print(&quot;Markdown files processed and images copied successfully&quot;)
</code></pre>
<p>Jadymy dalyj.</p>
<p>Teraz trzeba przygotować Githuba.
Załóż konto i tak dalej. Stwórz nowe repozytorium, np o nazwie bloga.</p>
<p>Będziemy potrzebować sposobu żeby się weryfikować przy uploadowaniu, więc trzeba sobie stworzyć klucze ssh. Służy do tego komenda:</p>
<pre><code>	ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot; # i wiadomo, podmień na swoje
</code></pre>
<p>W Githubie wejdź w Settings (pod zdjęciem profilu), po lewej będzie zakładka SSH and GPG keys. W Nagłówku SSH keys wklej swój publiczny klucz ssh (calutki, z pierwszym i ostatnim słowem). Klucz znajdzie się w folderze ~/.ssh/
Otwórz go sobie:</p>
<pre><code>	cat ~/.ssh/id_rsa.pub # z rozwinięciem .pub jest publiczny, id_rsa to domyślna nazwa, ten drugi bez rozwinięcia jest prywatny, ma tu zostać. 
</code></pre>
<p>Żeby przetestować czy udaje się zweryfikować można zrobić tak:</p>
<pre><code>	ssh -T git@github.com
	# powinien pojawić się taki komentarz:
	Hi ChudyWoody! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>
<p>Do tej pory pracowaliśmy na lokalnym repozytorium gita na naszym kompie, ale git się o tym nie kapnie póki mu nie powiemy żeby się kapnął. Musimy mu powiedzieć, że to w naszym folderze jest źródłem dla zgre_blog_test_repo na githubie:</p>
<pre><code>	git remote add origin git@github.com:ChudyWoody/zgre_blog_test_repo
	# po dwukropku dajemy swoją nazwę użytkownika w GitHubie, po slashu nazwę repozytorium (tą na githubie, może się różnić od lokalnego folderu jak u mnie). Origin to powszechny sposób etykietowania czy coś.
</code></pre>
<p>Następnie trzeba dodać wszystkie zmiany jakie poczyniliśmy w lokalnym folderze do lokalnego repo (upewnij się że jesteś w odpowiednim miejscu):</p>
<pre><code>	pwd # powinieneś być w swoim folderze z plikami stronki
	git add . # doda zmiany do repozytorium zdalnego (na kompie)
	git commit -m &quot;pierwszy commit&quot; # doda pierwszy commit, -m służy do dodania komentarza
	git push -u origin master # wyśle rzeczy do githuba? Tak, pośle rzeczy do githuba.
</code></pre>
<p>Teraz będziemy się rozjeżdżać z Chuckiem, bo on swoją stronkę hostuje na Hostinger, ale my chcemy używać tylko Github Pages.</p>
<pre><code>	# Tworzy nową gałąź (GHPages) zawierającą tylko pliki z katalogu `public`
	git subtree split --prefix public -b GHPages-deploy

	# Wypycha (`push`) nową gałąź `hostinger-deploy` do zdalnej gałęzi `GHPages` na GitHubie
	git push origin GHPages-deploy:GHPages --force # force zmusza do nadpisania, jeśli taka gałąź już istnieje
	
	# Usuwa lokalną gałąź GHPages-deploy (nie jest już potrzebna, służyła tylko do pushnięcia jej do GitHuba)
	git branch -D GHPages-deploy
</code></pre>
<p>Dobra, mamy gałązkę z samą stronką do publikowania.
Github Pages normalnie pozwala na publikowanie stron zrobionych w Jekyllu, ale hugo ma sposób żeby to obejść.
<a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/"  class="external-link" target="_blank" rel="noopener">https://gohugo.io/hosting-and-deployment/hosting-on-github/</a></p>
<p>Trzeba wejść w swoje repo ze stronką, wejść w ustawienia repo (nie użytkowanika jak wcześniej, ustawienia repo będą na poziomej wstążce, musimy też wybrać odpowiedniego brancha - GHPages w naszym przypadku). Po lewej będzie zakładka Pages. Pod nagłówkiem &ldquo;Build and deploymment&rdquo; wybieramy Source &ldquo;GitHub Actions&rdquo; (nie trzeba nijak potwierdzać).</p>
<p>W naszym lokalnym folderze trzeba utworzyć nowy katalog z plikiem hugo.yaml</p>
<pre><code>	mkdir -p .github/workflows
	touch .github/workflows/hugo.yaml
</code></pre>
<p>W utworzonym pliku trzeba przekleić ustawieniadla workflowa zmieniając odpowiednio branch i wersję hugo jeśli jest potrzeba.
Treść dla pliku hugo.yaml
<a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/#step-6"  class="external-link" target="_blank" rel="noopener">https://gohugo.io/hosting-and-deployment/hosting-on-github/#step-6</a></p>
<p>Następnie według instrukcji z gohugo</p>
<pre><code>	git add -A
	git commit -m &quot;Create hugo.yaml&quot;
	git push # nie trzeba robić &quot;-u origin master&quot;, git pamięta że ma pushować do master
</code></pre>
<p>Następnie trzeba uruchomić workflow. By to zrobić wybieramy nasz repo ze stronką, przechodzimy do Actions na wstążce, po lewej będzie &ldquo;All workflows&rdquo; z &ldquo;Deploy Hugo site to Pages&rdquo;.  Klikamy na niego, po prawej się on pojawi z przyciskiem Run workflow. Można tam wybrać branche</p>
<h3 id="problem---czy-trzeba-wybierać-branch-ghpages-czy-niepotrzebnie-ją-zrobiłem-wcześniej">
  problem - czy trzeba wybierać branch GHPages? czy niepotrzebnie ją zrobiłem wcześniej?
  <a class="heading-link" href="#problem---czy-trzeba-wybiera%c4%87-branch-ghpages-czy-niepotrzebnie-j%c4%85-zrobi%c5%82em-wcze%c5%9bniej">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Po kliknięciu będzie się chwilę kulać. Jak znaczek się zmieni na zielony znaczy że skończył.
Wtedy można kliknąć na ten nasz workflow, pokażą się boksy &ldquo;build&rdquo; i &ldquo;deploy&rdquo;. Pod drugim będzie link do naszej stronki.</p>
<h3 id="problem---stronka-się-wygenerowała-ale-zdjęcia-są-złe-trzeba-pokminić-nad-lokalizacjami">
  problem - stronka się wygenerowała, ale zdjęcia są złe, trzeba pokminić nad lokalizacjami
  <a class="heading-link" href="#problem---stronka-si%c4%99-wygenerowa%c5%82a-ale-zdj%c4%99cia-s%c4%85-z%c5%82e-trzeba-pokmini%c4%87-nad-lokalizacjami">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>

  </article>
</section>

  

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2025
     John Doe 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
